sap.ui.define([                                                                                                                                                                                                                                                
    "sap/ui/model/json/JSONModel",                                                                                                                                                                                                                             
    "sap/m/Dialog",                                                                                                                                                                                                                                            
    "sap/m/Button",                                                                                                                                                                                                                                            
    "sap/m/Text",                                                                                                                                                                                                                                              
    'sap/m/MessageToast'                                                                                                                                                                                                                                       
],                                                                                                                                                                                                                                                             
function (JSONModel, Dialog, Button, Text, MessageToast) {                                                                                                                                                                                                     
    "use strict";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
    return {                                                                                                                                                                                                                                                   
        /**                                                                                                                                                                                                                                                    
         * Initialize                                                                                                                                                                                                                                          
         */                                                                                                                                                                                                                                                    
        onInit: function () {                                                                                                                                                                                                                                  
            var oScreenControl = new JSONModel({                                                                                                                                                                                                               
                "sPricing": "",                                                                                                                                                                                                                                
                "oReason": {},                                                                                                                                                                                                                                 
                "nBatchNo": 0,                                                                                                                                                                                                                                 
                "nBatchCount": 0,                                                                                                                                                                                                                              
                "sFail_Message": "",                                                                                                                                                                                                                           
                "oDateFormat": sap.ui.core.format.DateFormat.getDateTimeInstance({                                                                                                                                                                             
                    pattern: "yyyyMMdd"                                                                                                                                                                                                                        
                })                                                                                                                                                                                                                                             
            })                                                                                                                                                                                                                                                 
            var oModel = this.getOwnerComponent().getModel();                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            this.getView().setModel(oScreenControl, "ScreenControl");                                                                                                                                                                                          
            this._getReason(oModel, this);                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
            var oFilter = this.getView().byId("zlg.lo.sd.zl001::sap.suite.ui.generic.template.ListReport.view.ListReport::ZEP_SALEDOCUMENT--listReportFilter");                                                                                                
        },                                                                                                                                                                                                                                                     
        /**                                                                                                                                                                                                                                                    
         *&nbsp;                                                                                                                                                                                                                                               
         * @param {*} oStartupObject&nbsp;                                                                                                                                                                                                                     
         */                                                                                                                                                                                                                                                    
        onInitSmartFilterBarExtension: function(oStartupObject) {                                                                                                                                                                                              
            var oFilterBar = oStartupObject.getSource();                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
                var oTodaysDate = new Date();&nbsp;                                                                                                                                                                                                            
                var oYearAgo = new Date();                                                                                                                                                                                                                     
                oYearAgo.setFullYear(oYearAgo.getFullYear() - 1);                                                                                                                                                                                              
                var oJSONData = {                                                                                                                                                                                                                              
                    CreationDate: {                                                                                                                                                                                                                            
                        low: oYearAgo,                                                                                                                                                                                                                         
                        high: oTodaysDate                                                                                                                                                                                                                      
                    }                                                                                                                                                                                                                                          
                };                                                                                                                                                                                                                                             
                oFilterBar.setFilterData(oJSONData);                                                                                                                                                                                                           
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Open Re-Pricing Dialog                                                                                                                                                                                                                              
         */                                                                                                                                                                                                                                                    
        onPricingPress: function () {                                                                                                                                                                                                                          
            if (!this._pricingDialog) {                                                                                                                                                                                                                        
                this._pricingDialog = sap.ui.xmlfragment("zlg.lo.sd.zl001.ext.fragments.RePricing", this);                                                                                                                                                     
            }                                                                                                                                                                                                                                                  
            this.getView().addDependent(this._pricingDialog);                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var oModel = this.getView().getModel(),                                                                                                                                                                                                            
                oScreenModel = this.getView().getModel("ScreenControl"),                                                                                                                                                                                       
                oFormat = oScreenModel.getProperty("/oDateFormat");                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
            var aSelected = this.extensionAPI.getSelectedContexts(),                                                                                                                                                                                           
                bDateEqual = this._checkDate(aSelected, oFormat);                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
            if (aSelected.length > 1 && !bDateEqual) {                                                                                                                                                                                                         
                oScreenModel.setProperty("/sPricing", "")                                                                                                                                                                                                      
            } else {                                                                                                                                                                                                                                           
                var sPath = aSelected[0].sDeepPath,                                                                                                                                                                                                            
                    oItem = oModel.getProperty(sPath);                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
                var sDate = oFormat.format(oItem.CreationDate)                                                                                                                                                                                                 
                oScreenModel.setProperty("/sPricing", sDate)                                                                                                                                                                                                   
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            this._pricingDialog.open();                                                                                                                                                                                                                        
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Re-Pricing Yes button process                                                                                                                                                                                                                       
         */                                                                                                                                                                                                                                                    
        onPricingApprove: function () {                                                                                                                                                                                                                        
            var oModel = this.getView().getModel(),                                                                                                                                                                                                            
                oScreenModel = this.getView().getModel("ScreenControl");                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
            oModel.setUseBatch(true);                                                                                                                                                                                                                          
            oModel.setDeferredGroups(["batch_pricing"]);                                                                                                                                                                                                       
            //  Check valid Date                                                                                                                                                                                                                               
            var oDatePicker = sap.ui.getCore().byId("Pricing_date"),                                                                                                                                                                                           
            sValueDate = oDatePicker.getValue().replaceAll("-", "").replaceAll("/", "");                                                                                                                                                                       
            if (!this._checkValidDate(oDatePicker)) return;                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
            var aSelected = this.extensionAPI.getSelectedContexts(),                                                                                                                                                                                           
                aBatch = this._createBatch(aSelected);                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
            this._resetScreenModel(oScreenModel, aBatch);                                                                                                                                                                                                      
            this._pricingDialog.setBusy(true);                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            for (var i = 0; i < aBatch.length; i++) {                                                                                                                                                                                                          
                var aBatchItem = aBatch[i];                                                                                                                                                                                                                    
                for (var j = 0; j < aBatchItem.length; j++) {                                                                                                                                                                                                  
                    var sPath = aBatchItem[j].sDeepPath,                                                                                                                                                                                                       
                        oItem = oModel.getProperty(sPath);                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                    oModel.callFunction("/UpdateDate", {                                                                                                                                                                                                       
                        method: "POST",                                                                                                                                                                                                                        
                        groupId: "batch_pricing",                                                                                                                                                                                                              
                        changeSetId: "pricing_changeset",                                                                                                                                                                                                      
                        urlParameters: {                                                                                                                                                                                                                       
                            SalesOrder: oItem.SalesOrder,                                                                                                                                                                                                      
                            pricing_date: sValueDate,                                                                                                                                                                                                          
                            reject_reason: "",                                                                                                                                                                                                                 
                        }                                                                                                                                                                                                                                      
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                this._pricingSubmitChange(oModel);                                                                                                                                                                                                             
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Open Reject Dialog                                                                                                                                                                                                                                  
         */                                                                                                                                                                                                                                                    
         onRejectPress: function () {                                                                                                                                                                                                                          
            if (!this._rejectDialog) {                                                                                                                                                                                                                         
                this._rejectDialog = sap.ui.xmlfragment("zlg.lo.sd.zl001.ext.fragments.Reject", this);                                                                                                                                                         
            }                                                                                                                                                                                                                                                  
            this.getView().addDependent(this._rejectDialog);                                                                                                                                                                                                   
            this._rejectDialog.open();                                                                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Close Re-Pricing Dialog                                                                                                                                                                                                                             
         */                                                                                                                                                                                                                                                    
        onPricingClose: function () {                                                                                                                                                                                                                          
            this._pricingDialog.close();                                                                                                                                                                                                                       
            this._pricingDialog.destroy();                                                                                                                                                                                                                     
            this._pricingDialog = null;                                                                                                                                                                                                                        
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Reject Dialog Yes button process                                                                                                                                                                                                                    
         */                                                                                                                                                                                                                                                    
        onRejectDialogPress: function () {                                                                                                                                                                                                                     
            var oModel = this.getView().getModel(),                                                                                                                                                                                                            
                oScreenModel = this.getView().getModel("ScreenControl");                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
            var aSelected = this.extensionAPI.getSelectedContexts(),                                                                                                                                                                                           
                oReasoncBox = sap.ui.getCore().byId("reason"),                                                                                                                                                                                                 
                sReason = oReasoncBox.getSelectedKey();                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
            var oFormat = oScreenModel.getProperty("/oDateFormat"),                                                                                                                                                                                            
                sDate = oFormat.format(new Date()).replaceAll("-", "").replaceAll("/", "");                                                                                                                                                                    
                                                                                                                                                                                                                                                               
            var aSelected = this.extensionAPI.getSelectedContexts(),                                                                                                                                                                                           
                aBatch = this._createBatch(aSelected);                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
            oModel.setUseBatch(true);                                                                                                                                                                                                                          
            oModel.setDeferredGroups(["rejectBatch"]);                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
            this._rejectDialog.setBusy(true);                                                                                                                                                                                                                  
            this._resetScreenModel(oScreenModel, aBatch);                                                                                                                                                                                                      
            for (var i = 0; i < aBatch.length; i++) {                                                                                                                                                                                                          
                var aBatchItem = aBatch[i];                                                                                                                                                                                                                    
&nbsp;                                                                                                                                                                                                                                                         
                for (var j = 0; j < aBatchItem.length; j++) {                                                                                                                                                                                                  
                    var sPath = aBatchItem[j].sDeepPath,                                                                                                                                                                                                       
                        oItem = oModel.getProperty(sPath);                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
                    oModel.callFunction("/Reject", {                                                                                                                                                                                                           
                        method: "POST",                                                                                                                                                                                                                        
                        groupId: "rejectBatch",                                                                                                                                                                                                                
                        changeSetId: "reason_changeset",                                                                                                                                                                                                       
                        urlParameters: {                                                                                                                                                                                                                       
                            SalesOrder: oItem.SalesOrder,                                                                                                                                                                                                      
                            pricing_date: sDate,                                                                                                                                                                                                               
                            reject_reason: sReason,                                                                                                                                                                                                            
                        },                                                                                                                                                                                                                                     
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                this._rejectSubmitChange(oModel);                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Close Reject Dialog                                                                                                                                                                                                                                 
         */                                                                                                                                                                                                                                                    
        onRejectCancel: function () {                                                                                                                                                                                                                          
            this._rejectDialog.close();                                                                                                                                                                                                                        
            this._rejectDialog.destroy();                                                                                                                                                                                                                      
            this._rejectDialog = null;                                                                                                                                                                                                                         
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Re-Pricing process                                                                                                                                                                                                                                  
         * @param {*} oModel&nbsp;                                                                                                                                                                                                                             
         */                                                                                                                                                                                                                                                    
        _pricingSubmitChange: function (oModel) {                                                                                                                                                                                                              
            var oScreenModel = this.getView().getModel("ScreenControl");                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
            oModel.submitChanges({                                                                                                                                                                                                                             
                groupId: "batch_pricing",                                                                                                                                                                                                                      
                success: function (oData) {                                                                                                                                                                                                                    
                    var sCount = oScreenModel.getProperty("/nBatchCount");                                                                                                                                                                                     
                    var oRequestStatus = JSON.parse(oData.__batchResponses[0].__changeResponses[0].headers["sap-message"]);                                                                                                                                    
                    oScreenModel.setProperty("/nBatchCount", ++sCount);                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                    this._handleRequestError(oRequestStatus);                                                                                                                                                                                                  
                    this._createMessageDialog();                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                    var nBatch_count = this.getView().getModel("ScreenControl").getProperty("/nBatchCount"),                                                                                                                                                   
                        nBatch_number = this.getView().getModel("ScreenControl").getProperty("/nBatchNo");                                                                                                                                                     
                                                                                                                                                                                                                                                               
                    if (nBatch_count === nBatch_number) {                                                                                                                                                                                                      
                        this._pricingDialog.setBusy(false);                                                                                                                                                                                                    
                        this.onPricingClose();                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                        var sError_message = this.getView().getModel("ScreenControl").getProperty("/sFail_Message").substring(1);                                                                                                                              
                        if (sError_message) {                                                                                                                                                                                                                  
                            var sErrMsg = this.getView().getModel("i18n").getResourceBundle().getText("requestFail");                                                                                                                                          
                            this.oErrorMessageDialog.getContent()[0].setText(sErrMsg + sError_message);                                                                                                                                                        
                            this.oErrorMessageDialog.open();                                                                                                                                                                                                   
                        } else {                                                                                                                                                                                                                               
                            var sSuccessMsg = this.getView().getModel("i18n").getResourceBundle().getText("requestSuccess");                                                                                                                                   
                            MessageToast.show(sSuccessMsg);                                                                                                                                                                                                    
                        }                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
                        this.extensionAPI.refreshTable(                                                                                                                                                                                                        
                            "zlg.lo.sd.zl001::sap.suite.ui.generic.template.ListReport.view.ListReport::ZEP_SALEDOCUMENT--listReport"                                                                                                                          
                        );                                                                                                                                                                                                                                     
                    }                                                                                                                                                                                                                                          
                }.bind(this),                                                                                                                                                                                                                                  
                error: function (err, response) {                                                                                                                                                                                                              
                    this._pricingDialog.setBusy(false);                                                                                                                                                                                                        
                }.bind(this)                                                                                                                                                                                                                                   
            });                                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Reject process                                                                                                                                                                                                                                      
         * @param {*} oModel&nbsp;                                                                                                                                                                                                                             
         */                                                                                                                                                                                                                                                    
        _rejectSubmitChange: function (oModel) {                                                                                                                                                                                                               
            var oScreenModel = this.getView().getModel("ScreenControl");                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
            oModel.submitChanges({                                                                                                                                                                                                                             
                groupId: "rejectBatch",                                                                                                                                                                                                                        
                success: function (oData) {                                                                                                                                                                                                                    
                    var sCount = oScreenModel.getProperty("/nBatchCount");                                                                                                                                                                                     
                    var oRequestStatus = JSON.parse(oData.__batchResponses[0].__changeResponses[0].headers["sap-message"]);                                                                                                                                    
                                                                                                                                                                                                                                                               
                    oScreenModel.setProperty("/nBatchCount", ++sCount);                                                                                                                                                                                        
                    this._handleRequestError(oRequestStatus);                                                                                                                                                                                                  
                    //&nbsp;                                                                                                                                                                                                                                   
                    this._createMessageDialog();                                                                                                                                                                                                               
                    //&nbsp;                                                                                                                                                                                                                                   
                    var nBatch_count = this.getView().getModel("ScreenControl").getProperty("/nBatchCount"),                                                                                                                                                   
                        nBatch_number = this.getView().getModel("ScreenControl").getProperty("/nBatchNo");                                                                                                                                                     
                                                                                                                                                                                                                                                               
                    if (nBatch_count === nBatch_number) {                                                                                                                                                                                                      
                        this._rejectDialog.setBusy(false);                                                                                                                                                                                                     
                        this.onRejectCancel();                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
                        var sError_message = this.getView().getModel("ScreenControl").getProperty("/sFail_Message").substring(1);                                                                                                                              
                        if (sError_message) {                                                                                                                                                                                                                  
                            var sErrMsg = this.getView().getModel("i18n").getResourceBundle().getText("requestFail");                                                                                                                                          
                            this.oErrorMessageDialog.getContent()[0].setText(sErrMsg + sError_message);                                                                                                                                                        
                            this.oErrorMessageDialog.open();                                                                                                                                                                                                   
                        } else {                                                                                                                                                                                                                               
                            var sSuccessMsg = this.getView().getModel("i18n").getResourceBundle().getText("requestSuccess");                                                                                                                                   
                            MessageToast.show(sSuccessMsg);                                                                                                                                                                                                    
                        }                                                                                                                                                                                                                                      
                        this.extensionAPI.refreshTable(                                                                                                                                                                                                        
                            "zlg.lo.sd.zl001::sap.suite.ui.generic.template.ListReport.view.ListReport::ZEP_SALEDOCUMENT--listReport"                                                                                                                          
                        );                                                                                                                                                                                                                                     
                    }                                                                                                                                                                                                                                          
                }.bind(this),                                                                                                                                                                                                                                  
                error: function (err, response) {                                                                                                                                                                                                              
                    this._rejectDialog.setBusy(false);                                                                                                                                                                                                         
                }                                                                                                                                                                                                                                              
            });                                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Create Message Dialog                                                                                                                                                                                                                               
         */                                                                                                                                                                                                                                                    
         _createMessageDialog: function () {                                                                                                                                                                                                                   
            if (!this.oErrorMessageDialog) {                                                                                                                                                                                                                   
                this.oErrorMessageDialog = new Dialog({                                                                                                                                                                                                        
                    type: "Message",                                                                                                                                                                                                                           
                    title: this.getView().getModel("i18n").getResourceBundle().getText("ErrorTitle"),                                                                                                                                                          
                    state: "Error",                                                                                                                                                                                                                            
                    content: new Text({                                                                                                                                                                                                                        
                        text: ""                                                                                                                                                                                                                               
                    }),                                                                                                                                                                                                                                        
                    beginButton: new Button({                                                                                                                                                                                                                  
                        type: "Emphasized",                                                                                                                                                                                                                    
                        text: this.getView().getModel("i18n").getResourceBundle().getText("okBtn"),                                                                                                                                                            
                        press: function () {                                                                                                                                                                                                                   
                            this.oErrorMessageDialog.close();                                                                                                                                                                                                  
                        }.bind(this)                                                                                                                                                                                                                           
                    })                                                                                                                                                                                                                                         
                });                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Validate data for Re-Pricing Dialog                                                                                                                                                                                                                 
         * @param {*} oDatePicker&nbsp;                                                                                                                                                                                                                        
         * @returns boolean                                                                                                                                                                                                                                    
         */                                                                                                                                                                                                                                                    
        _checkValidDate: function (oDatePicker) {                                                                                                                                                                                                              
            if (!oDatePicker.isValidValue() || !oDatePicker.getValue()) {                                                                                                                                                                                      
                oDatePicker.setValueState("Error");                                                                                                                                                                                                            
                var sErrMsg=this.getView().getModel("i18n").getResourceBundle().getText("invalidDate");                                                                                                                                                        
                oDatePicker.setValueStateText(sErrMsg)                                                                                                                                                                                                         
                return false;                                                                                                                                                                                                                                  
            } else {                                                                                                                                                                                                                                           
                oDatePicker.setValueState("None")                                                                                                                                                                                                              
                oDatePicker.setValueStateText("")                                                                                                                                                                                                              
                return true                                                                                                                                                                                                                                    
            }                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Validate all selected items date                                                                                                                                                                                                                    
         * @param {*} aSelected&nbsp;                                                                                                                                                                                                                          
         * @param {*} oFormat&nbsp;                                                                                                                                                                                                                            
         * @returns boolean                                                                                                                                                                                                                                    
         * True: when all Date is the same                                                                                                                                                                                                                     
         * False: when all Date is not the same                                                                                                                                                                                                                
         */                                                                                                                                                                                                                                                    
        _checkDate: function (aSelected, oFormat) {                                                                                                                                                                                                            
            var oModel = this.getView().getModel();                                                                                                                                                                                                            
            // always have value                                                                                                                                                                                                                               
            var sPath = aSelected[0].sDeepPath,                                                                                                                                                                                                                
                oItem = oModel.getProperty(sPath);                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
            var sDate = oFormat.format(oItem.CreationDate)                                                                                                                                                                                                     
            for (let index = 0; index < aSelected.length; index++) {                                                                                                                                                                                           
                sPath = aSelected[index].sDeepPath,                                                                                                                                                                                                            
                    oItem = oModel.getProperty(sPath);                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
                if (oFormat.format(oItem.CreationDate) !== sDate) {                                                                                                                                                                                            
                    return false;                                                                                                                                                                                                                              
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            return true;                                                                                                                                                                                                                                       
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Reset Screen Model                                                                                                                                                                                                                                  
         * @param {*} oScreenModel&nbsp;                                                                                                                                                                                                                       
         * @param {*} aBatch&nbsp;                                                                                                                                                                                                                             
         */                                                                                                                                                                                                                                                    
        _resetScreenModel: function (oScreenModel, aBatch) {                                                                                                                                                                                                   
            var sBatch_number = aBatch.length;                                                                                                                                                                                                                 
            oScreenModel.setProperty("/nBatchNo", sBatch_number);                                                                                                                                                                                              
            oScreenModel.setProperty("/nBatchCount", 0);                                                                                                                                                                                                       
            oScreenModel.setProperty("/sFail_Message", "");                                                                                                                                                                                                    
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Get Reason value for Reject dialog's Selection                                                                                                                                                                                                      
         * @param {*} oModel&nbsp;                                                                                                                                                                                                                             
         * @param {*} oThis&nbsp;                                                                                                                                                                                                                              
         */                                                                                                                                                                                                                                                    
         _getReason: function (oModel, oThis) {                                                                                                                                                                                                                
            oModel.read("/ZI_SalesDocumentRjcnReason_VH", {                                                                                                                                                                                                    
                success: function (oData) {                                                                                                                                                                                                                    
                    this.getView().getModel("ScreenControl").setProperty("/Reason", oData.results)                                                                                                                                                             
                }.bind(oThis),                                                                                                                                                                                                                                 
                error: function (oErr) {}.bind(oThis)                                                                                                                                                                                                          
            });                                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Create Batch array from selected record                                                                                                                                                                                                             
         * limit each batch request have max 10 request                                                                                                                                                                                                        
         * @param {*} aSelected&nbsp;                                                                                                                                                                                                                          
         * @returns&nbsp;                                                                                                                                                                                                                                      
         */                                                                                                                                                                                                                                                    
        _createBatch: function (aSelected) {                                                                                                                                                                                                                   
            var nBatchSize = 10;                                                                                                                                                                                                                               
            var aBatch = [];                                                                                                                                                                                                                                   
            for (var index = 0; index < aSelected.length; index += nBatchSize) {                                                                                                                                                                               
                var aElement = aSelected.slice(index, index + nBatchSize);                                                                                                                                                                                     
                aBatch.push(aElement);                                                                                                                                                                                                                         
            }                                                                                                                                                                                                                                                  
            return aBatch;                                                                                                                                                                                                                                     
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        /**                                                                                                                                                                                                                                                    
         * Handle error message                                                                                                                                                                                                                                
         * @param {*} oRequest&nbsp;                                                                                                                                                                                                                           
         */                                                                                                                                                                                                                                                    
        _handleRequestError: function (oRequest) {                                                                                                                                                                                                             
            var aError = oRequest.details,                                                                                                                                                                                                                     
                oFirstRequest = oRequest,                                                                                                                                                                                                                      
                sMessage = "";                                                                                                                                                                                                                                 
            var aFailedItem = [];                                                                                                                                                                                                                              
            if (aError) {                                                                                                                                                                                                                                      
                for (var index = 0; index < aError.length; index++) {                                                                                                                                                                                          
                    var sItem = aError[index].message;                                                                                                                                                                                                         
                    if (aError[index].severity === 'error') {                                                                                                                                                                                                  
                        aFailedItem.push(sItem);                                                                                                                                                                                                               
                    }                                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            }                                                                                                                                                                                                                                                  
            if (oFirstRequest.severity === 'error') {                                                                                                                                                                                                          
                aFailedItem.push(oFirstRequest.message);                                                                                                                                                                                                       
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            sMessage = aFailedItem.join();                                                                                                                                                                                                                     
            if (sMessage) {                                                                                                                                                                                                                                    
                sMessage = this.getView().getModel("ScreenControl").getProperty("/sFail_Message") + ',' + sMessage;                                                                                                                                            
                this.getView().getModel("ScreenControl").setProperty("/sFail_Message", sMessage)                                                                                                                                                               
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
        }                                                                                                                                                                                                                                                      
    };                                                                                                                                                                                                                                                         
});                                                                                                                                                                                                                                                            